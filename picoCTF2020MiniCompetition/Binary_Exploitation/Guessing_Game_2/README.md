# Lessons
- RELRO  
    https://ir0nstone.gitbook.io/notes/types/stack/relro  
    RELRO is a protection to stop any GOT overwrites from taking place, and it does so very effectively. There are two types of RELRO, which are both easy to understand.  
    - Partial RELRO  
    Partial RELRO simply moves the GOT above the program's variables, meaning you can't overflow into the GOT. This, of course, does not prevent format string overwrites.  
    - Full RELRO  
    Full RELRO makes the GOT completely read-only, so even format string exploits cannot overwrite it. This is not the default in binaries due to the fact that it can make it take much longer to load as it need to resolve all the function addresses at once.
    

# Memo
1. check
    ```zsh
    $ file ./vuln
    ./vuln: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=24c4fa8500082ef048a420baadc6a3d777d39f34, not stripped
    $ checksec --file=./vuln --output=json | jq .
    {
    "./vuln": {
        "relro": "full",
        "canary": "yes",
        "nx": "yes",
        "pie": "no",
        "rpath": "no",
        "runpath": "no",
        "symbols": "yes",
        "fortify_source": "no",
        "fortified": "0",
        "fortify-able": "3"
    }
    }
    ```
2. ghidra

3. gdb  
    - stage:1
    ```
    break *0x080486dc <do_stuff+125>
    break *0x0804871a <do_stuff+187>
    ```
    ```
    0x80486dc <do_stuff+125>    add    esp, 0x10
    0x80486df <do_stuff+128>    sub    esp, 0xc
    0x80486e2 <do_stuff+131>    lea    eax, [ebp - 0x20c]
    0x80486e8 <do_stuff+137>    push   eax
    0x80486e9 <do_stuff+138>    call   atol@plt                     <atol@plt>

    0x80486ee <do_stuff+143>    add    esp, 0x10
    0x80486f1 <do_stuff+146>    mov    dword ptr [ebp - 0x210], eax
    0x80486f7 <do_stuff+152>    cmp    dword ptr [ebp - 0x210], 0
    0x80486fe <do_stuff+159>    jne    do_stuff+181                     <do_stuff+181>
    ```

    ```zsh
    (x $ebp - 0x214)    input
    0xfffff000 	        -4096
    0xfffff060	        -4000
    0xfffff254	        -3500
    0xfffff63c	        -2500
    0xfffff641	        ... -2495
    0xfffff646	        -2490	
    0xfffff704	        -2300
    0xfffff830	        -2000
    0xfffffa24	        -1500
    ```
    input : -2496
    - stage:2